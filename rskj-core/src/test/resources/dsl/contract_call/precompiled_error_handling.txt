account_new acc1 20000000

# Deploy ErrorHandlingTest.sol

transaction_build tx01
    sender acc1
    nonce 0
    receiverAddress 00
    value 0
    data 608060405234801561001057600080fd5b506040518060800160405280630100000673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001630100000873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001630100000973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001630100001073ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681525060009060046101029291906102bb565b50604051806101000160405280600173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681525060019060086102b5929190610345565b50610412565b828054828255906000526020600020908101928215610334579160200282015b828111156103335782518260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550916020019190600101906102db565b5b50905061034191906103cf565b5090565b8280548282559060005260206000209081019282156103be579160200282015b828111156103bd5782518260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555091602001919060010190610365565b5b5090506103cb91906103cf565b5090565b61040f91905b8082111561040b57600081816101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055506001016103d5565b5090565b90565b61051e806104216000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c806391f2bb6d14610051578063d9111bd814610073578063e0c8ac6614610095578063e674f5e814610165575b600080fd5b6100596101c1565b604051808215151515815260200191505060405180910390f35b61007b610257565b604051808215151515815260200191505060405180910390f35b61014b600480360360208110156100ab57600080fd5b81019080803590602001906401000000008111156100c857600080fd5b8201836020820111156100da57600080fd5b803590602001918460208302840111640100000000831117156100fc57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f8201169050808301925050505050505091929192905050506102ed565b604051808215151515815260200191505060405180910390f35b6101a76004803603602081101561017b57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610364565b604051808215151515815260200191505060405180910390f35b6000610252600080548060200260200160405190810160405280929190818152602001828054801561024857602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116101fe575b50505050506102ed565b905090565b60006102e860018054806020026020016040519081016040528092919081815260200182805480156102de57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311610294575b50505050506102ed565b905090565b600080600090505b825181101561032e57600083828151811061030c57fe5b6020026020010151905061031f81610364565b505080806001019150506102f5565b507f1b5dd4fe5efbcfc88bb005fae9fdceab162bf13bef1fc1843ea22406b2a1d34760405160405180910390a160019050919050565b600080600090506000602090506000604090506000604051828185878a5afa91505060018111156103ff577fb7674390129469ce95bae9f76ab79e70536654d8771744491c2ba45c447a8b7686604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a160009450505050506104e4565b6000811415610478577faa679a624a231df95e2bd73419c633e47abb959a4d3bbfd245a07c036c38202e86604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a160009450505050506104e4565b7fd1c48ee5d8b9dfbcca9046f456364548ef0b27b0a39faf92aa1c253abf81648286604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a160019450505050505b91905056fea265627a7a723158205dad1164d0b7528e198838e2098b1637ebffc20b03eac85affcf07fbbbecc6f964736f6c63430005100032
    gas 2000000
    build

# Call method precompiledTest.errorHandlingRskPrecompiles()

transaction_build tx02
    sender acc1
    nonce 1
    contract tx01   # created in tx01
    value 0
    data 91f2bb6d
    gas 2000000
    build

# Call method precompiledTest.errorHandlingEthPrecompiles()

transaction_build tx03
    sender acc1
    nonce 2
    contract tx01   # created in tx01
    value 0
    data d9111bd8
    gas 2000000
    build

# Call method precompiledTest.errorHandlingRskPrecompiles()

transaction_build tx04
    sender acc1
    nonce 3
    contract tx01   # created in tx01
    value 0
    data 91f2bb6d
    gas 2000000
    build

# Call method precompiledTest.errorHandlingEthPrecompiles()

transaction_build tx05
    sender acc1
    nonce 4
    contract tx01   # created in tx01
    value 0
    data d9111bd8
    gas 2000000
    build


# Blocks
# Note: iris is activated at block 5

block_build b01
    parent g00
    transactions tx01
    gasLimit 3000000000
    build

block_connect b01
assert_best b01

block_build b02
    parent b01
    transactions tx02 tx03
    gasLimit 3000000000
    build

block_connect b02
assert_best b02

block_build b03
    parent b02
    transactions
    gasLimit 3000000000
    build

block_connect b03
assert_best b03

block_build b04
    parent b03
    transactions
    gasLimit 3000000000
    build

block_connect b04
assert_best b04

block_build b05
    parent b04
    transactions tx04 tx05
    gasLimit 3000000000
    build

block_connect b05
assert_best b05

comment
assert_tx_success tx01
assert_tx_success tx02
assert_tx_success tx03
end